/*! scooch 0.3.3 2014-05-30 */
var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery,Mobify.UI=Mobify.UI?Mobify.$.extend(Mobify.UI,{classPrefix:"m-"}):{classPrefix:"m-"},function(t,i){t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in i})}(Mobify.$,document),Mobify.UI.Utils=function(t){var i={},e=t.support,n=navigator.userAgent;i.events=e.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},i.getCursorPosition=e.touch?function(t){return t=t.originalEvent||t,{x:t.touches[0].clientX,y:t.touches[0].clientY}}:function(t){return{x:t.clientX,y:t.clientY}},i.getProperty=function(t){for(var i=["Webkit","Moz","O","ms",""],e=document.createElement("div").style,n=0;i.length>n;++n)if(void 0!==e[i[n]+t])return i[n]+t},t.extend(e,{transform:!!i.getProperty("Transform"),transform3d:!(!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix)||/android\s+[1-2]/i.test(n))});var s=i.getProperty("Transform");i.translateX=e.transform3d?function(t,i){"number"==typeof i&&(i+="px"),t.style[s]="translate3d("+i+",0,0)"}:e.transform?function(t,i){"number"==typeof i&&(i+="px"),t.style[s]="translate("+i+",0)"}:function(t,i){"number"==typeof i&&(i+="px"),t.style.left=i};var o=(i.getProperty("Transition"),i.getProperty("TransitionDuration"));return i.setTransitions=function(t,i){t.style[o]=i?"":"0s"},i.requestAnimationFrame=function(){for(var t=["ms","moz","webkit","o"],i=window.requestAnimationFrame,e=0;t.length>e&&!i;++e)console.log("vendors[x] = ",t[e]),i=window[t[e]+"RequestAnimationFrame"];return i||(i=function(t){var i=(new Date).getTime(),e=Math.max(0,16-(i-lastTime));lastTime=i+e;var n=window.setTimeout(function(){t(i+e)},e);return n}),function(){i.apply(window,arguments)}}(),i.cancelAnimationFrame=function(){for(var t,i=["ms","moz","webkit","o"],e=0;i.length>e&&!t;++e)t=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];return t||(t=function(t){clearTimeout(t)}),function(){t.apply(window,arguments)}}(),i}(Mobify.$),Mobify.UI.Scooch=function(t,i){var e={dragRadius:10,moveRadius:20,animate:!0,classPrefix:void 0,classNames:{outer:"scooch",inner:"scooch-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active",fluid:"fluid"},loop:!1,autoStart:!1,interval:5e3},n=t.support,s=function(t,i){this.setOptions(i),this.initElements(t),this.initOffsets(),this.initAnimation(),this.bind(),this._updateCallbacks=[],this.options.autoStart&&this.startLoop()};return s.prototype.startLoop=function(){function t(){var n=Date.now()-e.prevTimestamp;e.animating&&n>=e.options.interval&&(e.prevTimestamp=Date.now(),e.next()),e.animating&&(e.loopAnimId=i.requestAnimationFrame(t))}var e=this;e.prevTimestamp=Date.now(),t()},s.prototype.stopLoop=function(){this.loopAnimId&&i.cancelAnimationFrame(this.loopAnimId)},s.defaults=e,s.prototype.setOptions=function(i){var n=this.options||t.extend({},e,i);n.classNames=t.extend({},n.classNames,i.classNames||{}),n.classPrefix===void 0&&(n.classPrefix=Mobify.UI.classPrefix),this.options=n},s.prototype.initElements=function(i){this._index=1,this.element=i,this.$element=t(i),this.$inner=this.$element.find("."+this._getClass("inner")),this.$items=this.$inner.children(),this.$start=this.$items.eq(0),this.$sec=this.$items.eq(1),this.$current=this.$items.eq(this._index-1),this._length=this.$items.length,this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0,this._isFluid=this.$element.hasClass(this._getClass("fluid"))},s.prototype.initOffsets=function(){this._offsetDrag=0},s.prototype.initAnimation=function(){this.animating=!1,this.dragging=!1,this._needsUpdate=!1,this._enableAnimation()},s.prototype._getClass=function(t){return this.options.classPrefix+this.options.classNames[t]},s.prototype._enableAnimation=function(){this.animating||(i.setTransitions(this.$inner[0],!0),this.$inner.removeClass(this._getClass("dragging")),this.animating=!0)},s.prototype._disableAnimation=function(){this.animating&&(i.setTransitions(this.$inner[0],!1),this.$inner.addClass(this._getClass("dragging")),this.animating=!1)},s.prototype.refresh=function(){this.$items=this.$inner.children("."+this._getClass("item")),this.$start=this.$items.eq(0),this.$sec=this.$items.eq(1),this._length=this.$items.length,this.update()},s.prototype.update=function(t){if(t!==void 0&&this._updateCallbacks.push(t),!this._needsUpdate){this._needsUpdate=!0;var e=this;i.requestAnimationFrame(function(){e._update(),setTimeout(function(){for(var t=0,i=e._updateCallbacks.length;i>t;t++)e._updateCallbacks[t].call(e);e._updateCallbacks=[]},10)})}},s.prototype._update=function(){if(this._needsUpdate){var t=this.$current,e=this.$start,n=t.prop("offsetLeft")+t.prop("clientWidth")*this._alignment,s=e.prop("offsetLeft")+e.prop("clientWidth")*this._alignment,o=Math.round(-(n-s)+this._offsetDrag);i.translateX(this.$inner[0],o),this._needsUpdate=!1}},s.prototype.bind=function(){function e(t){n.touch||t.preventDefault(),p=!0,d=!1,r=i.getCursorPosition(t),h=0,l=0,u=!1,f._disableAnimation(),f.stopLoop(),_=1==f._index,$=f._index==f._length}function s(t){if(p&&!d){var e=i.getCursorPosition(t),n=f.$element.width();h=r.x-e.x,l=r.y-e.y,u||c(h)>c(l)&&c(h)>m?(u=!0,t.preventDefault(),_&&0>h?h=h*-n/(h-n):$&&h>0&&(h=h*n/(h+n)),f._offsetDrag=-h,f.update()):c(l)>c(h)&&c(l)>m&&(d=!0)}}function o(){p&&(p=!1,f._enableAnimation(),f.options.autoStart&&f.startLoop(),!d&&c(h)>y.moveRadius?h>0?f.next():f.prev():(f._offsetDrag=0,f.update()))}function a(t){u&&t.preventDefault()}var r,h,l,u,c=Math.abs,p=!1,d=!1,m=this.options.dragRadius,f=this,g=this.$element,v=this.$inner,y=this.options,_=!1,$=!1,b=t(window).width();v.on(i.events.down+".scooch",e).on(i.events.move+".scooch",s).on(i.events.up+".scooch",o).on("click.scooch",a).on("mouseout.scooch",o),g.on("click","[data-m-slide]",function(i){i.preventDefault();var e=t(this).attr("data-m-slide"),n=parseInt(e,10);isNaN(n)?f[e]():f.move(n)}),g.on("afterSlide",function(t,i,e){f.$items.eq(i-1).removeClass(f._getClass("active")),f.$items.eq(e-1).addClass(f._getClass("active")),f.$element.find("[data-m-slide='"+i+"']").removeClass(f._getClass("active")),f.$element.find("[data-m-slide='"+e+"']").addClass(f._getClass("active"))}),t(window).on("resize orientationchange",function(){b!=t(window).width()&&(f._disableAnimation(),b=t(window).width(),f.update())}),g.trigger("beforeSlide",[1,1]),g.trigger("afterSlide",[1,1]),f.update()},s.prototype.unbind=function(){this.$inner.off()},s.prototype.destroy=function(){this.unbind(),this.$element.trigger("destroy"),this.$element.remove(),this.$element=null,this.$inner=null,this.$start=null,this.$current=null},s.prototype.move=function(i,e){var n=this.$element,s=(this.$inner,this.$items),o=(this.$start,this.$current),a=this._length,r=this._index;e=t.extend({},this.options,e),1>i?i=this.options.loop?a:1:i>this._length&&(i=this.options.loop?1:a),i==this._index,e.animate?this._enableAnimation():this._disableAnimation(),n.trigger("beforeSlide",[r,i]),this.$current=o=s.eq(i-1),this._offsetDrag=0,this._index=i,e.animate?this.update():this.update(function(){this._enableAnimation()}),n.trigger("afterSlide",[r,i])},s.prototype.next=function(){this.move(this._index+1)},s.prototype.prev=function(){this.move(this._index-1)},s}(Mobify.$,Mobify.UI.Utils),function(t){t.fn.scooch=function(i,e){var n=t.extend({},t.fn.scooch.defaults);"object"==typeof i&&(t.extend(n,i,!0),e=null,i=null);var e=Array.prototype.slice.apply(arguments);return this.each(function(){var s=(t(this),this._scooch);s||(s=new Mobify.UI.Scooch(this,n)),i&&(s[i].apply(s,e.slice(1)),"destroy"===i&&(s=null)),this._scooch=s}),this},t.fn.scooch.defaults={}}(Mobify.$);